import{r as P,o as l,c as u,a as n,n as w,b as d,w as v,t as S,d as g,e as h,f as E,F as L,g as j,h as x,i as N,j as R,k as m,l as T,m as I}from"./vendor.0a9860fd.js";const U=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}};U();var $=(t,e)=>{const r=t.__vccOpts||t;for(const[i,s]of e)r[i]=s;return r};const D={name:"Topbar",computed:{usuario(){return this.$store.state.usuario.user}},data(){return{show:!1}},methods:{toggleNavbar(){this.show=!this.show},sair(){this.$store.dispatch("usuario/sair"),this.$router.push("/")}}},V={class:"navbar navbar-expand-lg navbar-light bg-light"},z={class:"container-fluid"},F=n("a",{class:"navbar-brand"},"Encurtador de URL",-1),B=n("span",{class:"navbar-toggler-icon"},null,-1),H=[B],q={class:"navbar-nav me-auto mb-2 mb-lg-0"},G={class:"nav-item"},J=h("Home"),W={class:"nav-item"},K=h("Adicionar URL"),M={class:"d-flex navbar-nav"},Q={key:0,class:"nav-item"},X={class:"nav-link disabled"},Y={key:1,class:"nav-item"},Z=n("a",{class:"nav-link disabled"},"Ol\xE1 An\xF4nimo :-)",-1),ee=[Z],re={key:2,class:"nav-item"},te=h("Registrar-se"),se={key:3,class:"nav-item"},ae=h("Entrar"),oe=n("a",{class:"nav-link"},"Sair",-1),ne=[oe];function ie(t,e,r,i,s,a){const o=P("router-link");return l(),u("nav",V,[n("div",z,[F,n("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",onClick:e[0]||(e[0]=(...c)=>a.toggleNavbar&&a.toggleNavbar(...c))},H),n("div",{class:w(["collapse navbar-collapse",s.show?"":"hidden"]),id:"navbarSupportedContent"},[n("ul",q,[n("li",G,[d(o,{class:"nav-link",to:"/"},{default:v(()=>[J]),_:1})]),n("li",W,[d(o,{class:"nav-link",to:"/nova_url"},{default:v(()=>[K]),_:1})])]),n("ul",M,[a.usuario?(l(),u("li",Q,[n("a",X,"Ol\xE1 "+S(a.usuario.nome)+" :-)",1)])):(l(),u("li",Y,ee)),a.usuario?g("",!0):(l(),u("li",re,[d(o,{class:"nav-link",to:"/registrar"},{default:v(()=>[te]),_:1})])),a.usuario?g("",!0):(l(),u("li",se,[d(o,{class:"nav-link",to:"/entrar"},{default:v(()=>[ae]),_:1})])),a.usuario?(l(),u("li",{key:4,class:"nav-item",onClick:e[1]||(e[1]=(...c)=>a.sair&&a.sair(...c))},ne)):g("",!0)])],2)])])}var ce=$(D,[["render",ie]]);const le={name:"AlertaGlobal",data(){return{alerts:this.$store.state.alerta.itens}},directives:{delay:{mounted(t,e){setTimeout(e.value,3e3)}}},methods:{remover(t){this.$store.dispatch("alerta/remover",t)}}},ue={class:"alert-box"},de=["onClick"];function me(t,e,r,i,s,a){const o=E("delay");return l(),u("div",ue,[(l(!0),u(L,null,j(s.alerts,c=>x((l(),u("div",{key:c.id,class:w(["alert alert-dismissible fade show",c.ok?"alert-success":"alert-danger"]),role:"alert"},[n("strong",null,S(c.msg),1),n("button",{onClick:k=>a.remover(c),type:"button",class:"btn-close","data-bs-dismiss":"alert"},null,8,de)],2)),[[o,()=>a.remover(c)]])),128))])}var _e=$(le,[["render",me]]);const pe={id:"app"},ve={class:"container"},he={class:"app-center"},fe={class:"col-12 col-md-9 col-lg-7 col-xl-6"},ge={class:"form-body"},be={setup(t){return(e,r)=>{const i=P("router-view");return l(),u("div",pe,[d(ce),d(_e),n("div",ve,[n("div",he,[n("div",fe,[n("form",ge,[d(i)])])])])])}}},ye="modulepreload",C={},ke="/",f=function(e,r){return!r||r.length===0?e():Promise.all(r.map(i=>{if(i=`${ke}${i}`,i in C)return;C[i]=!0;const s=i.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${a}`))return;const o=document.createElement("link");if(o.rel=s?"stylesheet":ye,s||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),s)return new Promise((c,k)=>{o.addEventListener("load",c),o.addEventListener("error",k)})})).then(()=>e())},Pe=[{path:"/",name:"home",component:()=>f(()=>import("./Home.2b604c16.js"),["assets/Home.2b604c16.js","assets/vendor.0a9860fd.js"])},{path:"/entrar",name:"entrar",component:()=>f(()=>import("./Entrar.a4c9248e.js"),["assets/Entrar.a4c9248e.js","assets/Input.74f6be88.js","assets/vendor.0a9860fd.js"])},{path:"/registrar",name:"registrar",component:()=>f(()=>import("./Registrar.f147586f.js"),["assets/Registrar.f147586f.js","assets/Input.74f6be88.js","assets/vendor.0a9860fd.js"])},{path:"/nova_url",name:"nova_url",component:()=>f(()=>import("./Cadastro.a53e8f9d.js"),["assets/Cadastro.a53e8f9d.js","assets/Input.74f6be88.js","assets/vendor.0a9860fd.js"])}],we=N({history:R(),routes:Pe}),O="https://node-url-speedio.herokuapp.com/user";class Se{registrar(e){return m.post(O+"/registrar",{nome:e.nome,email:e.email,senha:e.senha})}async entrar(e){const r=await m.get(O+"/logar",{params:{email:e.email,senha:e.senha}});return r.data.accessToken&&localStorage.setItem("user",JSON.stringify(r.data)),r.data}sair(){localStorage.removeItem("user")}}var b=new Se;const A=JSON.parse(localStorage.getItem("user")),$e=A?{user:A}:{user:null},Ce={namespaced:!0,state:$e,actions:{entrar({commit:t},e){return b.entrar(e).then(r=>(t("entrarOk",r),Promise.resolve(r)),r=>(t("entrarFalha"),Promise.reject(r)))},sair({commit:t}){b.sair(),t("sair")},registrar({commit:t},e){return b.registrar(e).then(r=>Promise.resolve(r.data),r=>Promise.reject(r))}},mutations:{entrarOk(t,e){t.user=e},entrarFalha(t){t.user=null},sair(t){t.user=null}}},Oe={namespaced:!0,state:{itens:[]},actions:{criar({commit:t},e){t("criarAlerta",e)},remover({commit:t},e){t("removerAlerta",e)}},mutations:{criarAlerta(t,e){e.id=Date.now(),t.itens.push(e)},removerAlerta(t,e){let r=t.itens.indexOf(e);r>-1&&t.itens.splice(r,1)}}},_="https://node-url-speedio.herokuapp.com/url";class Ae{async salvar(e){return(await m.post(_+"/",e.user?{big:e.big,user:e.user}:{big:e.big})).data}async listar(){try{return(await m.get(_+"/")).data}catch(e){return console.error(e),[]}}async top100(){try{return(await m.get(_+"/top100")).data}catch(e){return console.error(e),[]}}async incrementarClick(e){try{return(await m.get(_+"/view/"+e)).data}catch(r){return r}}async deletar(e){try{return(await m.delete(_+"/"+e)).data}catch(r){return r}}}var p=new Ae;const Ee={namespaced:!0,state:{urls:[],top100:[]},actions:{salvar({commit:t},e){return p.salvar(e).then(r=>Promise.resolve(r),r=>Promise.reject(r))},async listar({commit:t}){await p.listar().then(e=>(t("atualizarUrls",e),Promise.resolve(e)),e=>Promise.reject(e)),await p.top100().then(e=>(t("atualizarTop100",e),Promise.resolve(e)),e=>Promise.reject(e))},async incrementarClick({commit:t},e){return p.incrementarClick(e).then(r=>Promise.resolve(r),r=>Promise.reject(r))},async deletar({commit:t},e){return p.deletar(e).then(r=>Promise.resolve(r),r=>Promise.reject(r))}},mutations:{atualizarUrls(t,e){t.urls=e},atualizarTop100(t,e){t.top100=e}}},Le=T({modules:{usuario:Ce,alerta:Oe,url:Ee}});const y=I(be);y.use(we);y.use(Le);y.mount("#app");export{$ as _};
